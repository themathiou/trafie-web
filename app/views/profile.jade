div.profile-page.col-xs-12.col-sm-12.col-md-12.col-lg-8(ng-init="initProfile()"  ng-cloak)

  //- PAGE NOT FOUND
  div(ng-if="page_not_found")
    div.col-xs-12.dropdown_container_xs(ng-if="isMobile")
      div.flex_wrapper
        input.search(type="text" ng-model="asyncSelected" placeholder="search for athletes!" typeahead-on-select="onSelect($item, $model, $label)" typeahead="result.label for result in searchUser($viewValue)" typeahead-loading="loadingLocations" class="form-control" autocomplete="off")

    div.vertical_space_50.hidden-xs
    div.empty-state-wrapper
      img(src="/images/ui/search.svg")
      h4 The page you are looking for doesn't exist.
      h4 Use the search box on top to search for athletes

  //- PAGE FOUND START
  div.col-xs-12.col-sm-12.col-md-12.col-lg-12(ng-if="!page_not_found")
    //- div.col-xs-12.dropdown_container_xs(ng-if="isMobile")
      div.flex_wrapper
        input.search(type="text" ng-model="asyncSelected" placeholder="search for athletes!" typeahead-on-select="onSelect($item, $model, $label)" typeahead="result.label for result in searchUser($viewValue)" typeahead-loading="loadingLocations" class="form-control" autocomplete="off")

    //- LEFT COLUMN
    include partials/profile/left_column

    //- HISTORY TIMELINE
    div.col-xs-12.col-sm-8.col-md-8.col-lg-8(when-scrolled="loadMore()")
      //- FILTERS
      ul.filters-row
        li
          a(ng-click="getActivities(current_user._id)" ng-class="{selected: !selected_discipline}") All
        li(ng-repeat="discipline in current_user.disciplines_of_user")
          a(ng-click="getActivities(current_user._id, discipline.discipline)" ng-class="{selected: selected_discipline === discipline.discipline}") {{discipline.formatted_discipline}}

      ul.filters-row
        li
          a(ng-click="filterByYear()" ng-class="{selected: !selected_year.date}") All
        li(ng-repeat="year in active_years")
          a(ng-click="filterByYear(year)" ng-class="{selected: selected_year.date === year}") {{year}}

      ul.history_line
        li(ng-show="!isLoading")
          //- ADD ACTIVITY
          include partials/profile/add_activity

        li(ng-if="!isLoading && noActivities")
          div.empty-state-wrapper
              img(src="/images/ui/podium.svg")
              h4(ng-show="self") There's nothing here! Add some!
              h4(ng-show="!self") There's nothing here!

        //- .my-repeat-animation to be added
        li(ng-repeat="activity in activities | filter:selected_year | limitTo:LAZY_LOADING_VIEW")
          div.info(ng-class="{editable: activity.show_editable_form}" ng-show="!isLoading")
            //- a.deleteActivity(ng-if="self && !activity.show_editable_form && !isTouch" ng-click="deleteActivity(activity._id)" tooltip-placement="top" tooltip="Delete")
            //-   include partials/svg/delete_activity_svg
            //- a.deleteActivity(ng-if="self && !activity.show_editable_form && isTouch" ng-click="deleteActivity(activity._id)")
            //-   include partials/svg/delete_activity_svg

            span.dropdown(ng-if="self && !activity.show_editable_form" style="float:right;" dropdown on-toggle="toggled(open)")
              a.dropdown-toggle(href="" dropdown-toggle) •••
              ul.dropdown-menu
                li
                  a(href="" ng-click="initEditableActivity(activity)") Edit
                li
                  a(href="" ng-click="deleteActivity(activity._id)") Delete


            div.current_data(ng-show="!activity.show_editable_form")
              h2 {{activity.formatted_performance}}
                small.competition {{activity.competition}} ({{activity.place}})
              p.location-date {{activity.formatted_date}} | {{activity.location}}
              p.notes(ng-if="activity.notes")
                em &quot;{{activity.notes}}&quot;

            a.privacy(style="float:right;" ng-if="self && !isTouch && !activity.show_editable_form" ng-click="changePrivacy(activity)" tooltip-placement="top" tooltip="Change Privacy")
                span(ng-if="activity.private")
                  include partials/svg/locked_svg
                span(ng-if="!activity.private")
                  include partials/svg/unlocked_svg
            a.privacy(style="float:right;" ng-if="self && isTouch && !activity.show_editable_form" ng-click="changePrivacy(activity)")
                span(ng-if="activity.private")
                  include partials/svg/locked_svg
                span(ng-if="!activity.private")
                  include partials/svg/unlocked_svg

            //- a.editActivity(ng-if="self && !isTouch" ng-click="initEditableActivity(activity)" tooltip-placement="top" tooltip="Edit")
            //-   include partials/svg/edit_activity_svg
            //- a.editActivity(ng-if="self && isTouch" ng-click="initEditableActivity(activity)")
            //-   include partials/svg/edit_activity_svg

            //-edit activity templates
            include partials/profile/activities_templates

        li(ng-show="!isLoading && !noActivities")
          div.end
            div.discipline everything started here

    //- LOADING SPINNER
    div.spinner(ng-show="isLoading")
    h4(ng-show="isLoading") Loading the awesomeness!
